{%- assign selected_variant = product.selected_or_first_available_variant -%}

{%- if block.settings.show_share_buttons -%}
    {%- capture share_buttons -%}
        {%- assign share_url = shop.url | append: product.url | url_param_escape -%}
        {%- assign twitter_text = product.title | url_param_escape -%}
        {%- assign pinterest_description = product.description | strip_html | truncatewords: 15 | url_param_escape -%}
        {%- assign pinterest_image = product.featured_media | img_url: '1024x' | prepend: 'https:' -%}

        <ul class="social-media__item-list list--unstyled" role="list">
            <li class="social-media__item social-media__item--facebook">
                <a href="https://www.facebook.com/sharer.php?u={{ share_url }}" target="_blank" rel="noopener"
                   aria-label="{{ 'general.social.facebook_share' | t }}">{%- render 'icon', icon: 'facebook' -%}</a>
            </li>

            <li class="social-media__item social-media__item--twitter">
                <a href="https://twitter.com/share?{% if twitter_text != blank %}text={{ twitter_text }}&{% endif %}url={{ share_url }}"
                   target="_blank" rel="noopener"
                   aria-label="{{ 'general.social.twitter_tweet' | t }}">{%- render 'icon', icon: 'twitter' -%}</a>
            </li>

            <li class="social-media__item">
                <a href="mailto:?&subject={{ product.title | escape }}&body={{ share_url }}"
                   aria-label="{{ 'general.social.email_share' | t }}">{% render 'icon', icon: 'email' %}</a>
            </li>
        </ul>
    {%- endcapture -%}
{%- endif -%}

<div class="product-meta">
    {%- if template.name == 'product' and template != 'product.quick-view' -%}
        <h1 class="product-meta__title heading h1">{{ product.title }}</h1>

    {%- else -%}
        <h3 class="product-meta__title heading h2">
            <a href="{{ product.url }}">{{ product.title }}</a>
        </h3>
    {%- endif -%}

    {%- capture product_labels -%}
        {%- for tag in product.tags -%}
            {%- if tag contains '__label:' -%}
                <span class="product-label product-label--custom1">{{ tag | split: '__label:' | last }}</span>
            {%- endif -%}

            {%- if tag contains '__label1:' -%}
                <span class="product-label product-label--custom1">{{ tag | split: '__label1:' | last }}</span>
            {%- endif -%}

            {%- if tag contains '__label2:' -%}
                <span class="product-label product-label--custom2">{{ tag | split: '__label2:' | last }}</span>
            {%- endif -%}
        {%- endfor -%}

        {%- if settings.show_discount -%}
            {%- assign savings = 0 -%}

            {%- if settings.discount_mode == 'percentage' -%}
                {%- assign savings = selected_variant.compare_at_price | minus: selected_variant.price | times: 100.0 | divided_by: selected_variant.compare_at_price | round | append: '%' -%}
            {%- else -%}
                {%- capture savings -%}
                    <span>{{ selected_variant.compare_at_price | minus: selected_variant.price | money }}</span>{%- endcapture -%}
            {%- endif -%}

            <span class="product-label product-label--on-sale"
                  {% unless selected_variant.price < selected_variant.compare_at_price %}style="display: none"{% endunless %}>{{ 'collection.product.discount_html' | t: savings: savings }}</span>
        {%- endif -%}
    {%- endcapture -%}

    <div class="product_discount">
        {%- if product_labels != blank -%}
            <div class="product-meta__label-list">
                {{- product_labels -}}
            </div>
        {%- endif -%}

        {% if block.settings.show_promocode %}
            {% if product.id == 6735715172396
            or product.id == 5430176710700
            or product.id == 6560229392428
            or product.id == 6626801614892
            or product.id == 6655507824684
            or product.id == 6987414208556
            or product.id == 7020721176620
            or product.id == 6831065104428
            or product.id == 6869967339564
            or product.id == 6912485818412
            or product.id == 6913625423916
            or product.id == 7103655477292
            or product.id == 6984741847084
            or product.id == 7049943515180
            or product.id == 7103436783660
            or product.id == 7108741398572
            or product.id == 7103718981676
            or product.id == 7110468894764
            or product.id == 6912512655404
            %}
                <div class="product-meta__label-list">
                    <div class="product-label product-label--promocode">
                        {% if product.id == 6735715172396 %}     Buy 10pcs for $90. CODE: AQUABAR
                        {% elsif product.id == 5430176710700 %}  Buy 10pcs for $63.CODE: XTRA
                        {% elsif product.id == 6626801614892 %}  Buy 10pcs for $125. CODE: ARTX
                        {% elsif product.id == 6655507824684 %}  Buy 10pcs for $72. CODE: NIIN
                        {% elsif product.id == 6987414208556 %}  Buy 10pcs for $134. CODE: LOSTMARY
                        {% elsif product.id == 7020721176620 %}  Buy 10pcs for $152. CODE: BC5000ULTRA
                        {% elsif product.id == 6831065104428 %}  Buy 10pcs for $107. CODE: XTRAFLOW
                        {% elsif product.id == 6869967339564 %}  Buy 10pcs for $116. CODE: NKD100MAX
                        {% elsif product.id == 6912485818412 %}  Buy 10pcs for $143. CODE: MAXGBOX
                        {% elsif product.id == 6913625423916 %}  Buy 10pcs for $53. CODE: FLUMMI
                        {% elsif product.id == 7103655477292 %}  Buy 10pcs for $134. CODE: EBARTE5000
                        {% elsif product.id == 6984741847084 %}  Buy 10pcs for $116. CODE: HYPPEMAXAIR
                        {% elsif product.id == 7049943515180 %}  Buy 10pcs for $148. CODE: ORIONBAR
                        {% elsif product.id == 7103436783660 %}  Buy 10pcs for $117. CODE: SERAPHULTRA
                        {% elsif product.id == 7108741398572 %}  Buy 10pcs for $143. CODE: PODPOCKET
                        {% elsif product.id == 7103718981676 %}  Buy 10pcs for $125. CODE: INSTABARJAR
                        {% elsif product.id == 7110468894764 %}  Buy 10pcs for $130. CODE: TWIST600
                        {% elsif product.id == 6912512655404 %}  Buy 10pcs for $126. CODE: PEBBLE
                        {% endif %}
                    </div>
                </div>
            {% endif %}
        {% endif %}
        <div></div>
    </div>

    {%- if block.settings.show_vendor or block.settings.show_sku -%}
        <div class="product-meta__reference">
            {%- if block.settings.show_vendor -%}
                {%- assign vendor_handle = product.vendor | handle -%}
                {%- assign collection_for_vendor = collections[vendor_handle] -%}

                {%- unless collection_for_vendor.empty? -%}
                    <a class="product-meta__vendor link link--accented"
                       href="{{ collection_for_vendor.url }}">{{ product.vendor }}</a>
                {%- else -%}
                    <a class="product-meta__vendor link link--accented"
                       href="{{ product.vendor | url_for_vendor }}">{{ product.vendor }}</a>
                {%- endunless -%}
            {%- endif -%}

            {%- if block.settings.show_sku -%}
                <span class="product-meta__sku" {% if selected_variant.sku == blank %}style="display: none"{% endif %}>
          {{- 'product.general.sku' | t -}} <span class="product-meta__sku-number">{{ selected_variant.sku }}</span>
        </span>
            {%- endif -%}
        </div>
    {%- endif -%}

    {%- if block.settings.show_reviews_badge -%}
        <a href="{% if template.name != 'product' or template == 'product.quick-view' %}{{ product.url }}{% endif %}#product-reviews"
           class="product-meta__reviews-badge link" data-offset="30">
            {%- render 'product-rating', product: product -%}
        </a>
    {%- endif -%}

    {%- if block.settings.show_share_buttons -%}
        <div class="product-meta__share-buttons hidden-phone">
            {{ share_buttons }}
        </div>
    {%- endif -%}
</div>
<div class="price-match-wrapper">
    {% comment %}Start automatically added Judge.me widget{% endcomment %}
    {% render 'judgeme_widgets', widget_type: 'judgeme_preview_badge', concierge_install: true, product: product, jm_style: 'font-size:84%' %}
    {% comment %}End automatically added Judge.me widget{% endcomment %}

    {%- if block.settings.show_price_match -%}
        <div class="price-match">
            <a href="../../pages/faq#discount">
                <img src="https://cdn.shopify.com/s/files/1/1118/8312/files/price-match.svg?v=1692092348"
                     alt="Price Match Guaranteed">
            </a>
        </div>
    {% endif %}
</div>
<hr class="card__separator">

<style>
    .meta-alert {
        margin-bottom: 20px;
        padding: 8px;
        border: 1px solid transparent;
        border-radius: 4px;
        font-size: 14px;
    }

    .meta-alert p {
    }

    .meta-alert-info {
        color: #31708f;
        background-color: #d9edf7;
        border-color: #bce8f1;
    }

    .meta-alert-dismissible {
        padding-right: 35px;
    }

    .meta-alert-dismissible .meta-alert-close {
        position: relative;
        top: 2px;
        right: -21px;
        color: inherit;
    }

    .meta-alert-close {
        float: right;
        font-size: 21px;
        font-weight: 700;
        line-height: 1;
        color: #000;
        text-shadow: 0 1px 0 #fff;
        filter: alpha(opacity=20);
        opacity: .2;
    }

    .meta-alert-close:hover {
        color: #000;
        text-decoration: none;
        cursor: pointer;
        filter: alpha(opacity=50);
        opacity: .5;
    }

</style>
{% if product.id == 7121031331884 or product.id == 7145419079724 %}
    <div class="meta-alert meta-alert-info meta-alert-dismissible ">
        <a class="meta-alert-close">×</a>
        <p>Funky Republic is rebranding and will now be known as Funky Lands. Depending on
            our
            current stock, you may receive either Funky Republic or the newer Funky Lands.</p>
    </div>
{% elsif product.id == 7049835282476 or product.id == 7020721176620 or product.id == 7135999918124 or product.id == 7103655477292 or product.id == 7135754485804 or product.id == 6836427096108 or product.id == 7106098004012 or product.id == 7169107722284 %}
    <div class="meta-alert meta-alert-info meta-alert-dismissible ">
        <a class="meta-alert-close">×</a>
        <p>EB Design is rebranding to EB Create. You may receive either EB Design or the
            newer
            EB Create depending on current stock.</p>
    </div>
{% elsif product.id == 6987414208556 or product.id == 7121033330732 %}
    <div class="meta-alert meta-alert-info meta-alert-dismissible ">
        <a class="meta-alert-close">×</a>
        <p>Newer versions contain 4% nicotine and 10ml of eJuice. You may receive 4%
            nicotine
            depending on current stock.</p>
    </div>
{% elsif  product.id == 6630824509484 %}
    <div class="meta-alert meta-alert-info meta-alert-dismissible ">
        <a class="meta-alert-close">×</a>
        <p>Please be advised that Hyppe Max Flow is in the process of making new packaging and removing the Supreme logo on newer batches.</p>
    </div>
{% endif %}
<script>
    document.querySelector(".meta-alert-close").addEventListener("click", (e) => {
        document.querySelector(".meta-alert").style.display = "none"
    });
</script>